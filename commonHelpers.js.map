{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const options = {\n  method: 'GET', // *GET, POST, PUT, DELETE, etc.\n};\nconst API_KEY = '42598065-1779ad5a953180c3fe77c2809';\nconst API_URL = 'https://pixabay.com/api/?';\n\nexport async function getGalleryData(queryValue) {\n  try {\n    const searchParams = new URLSearchParams({\n      key: API_KEY,\n      q: queryValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    });\n\n    const response = await fetch(API_URL + searchParams, options);\n\n    if (!response.ok) {\n      throw new Error(`Error(getGalleryData): ${response.status}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    return `Exception(getGalleryData): ${error}`;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(data, tagToInsert) {\n  tagToInsert.innerHTML = markup(data);\n\n  lightbox.refresh();\n}\n\nfunction markup(data) {\n  return data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n\t\t\t\t<li class=\"gallery-item hvr-grow\">\n\t\t\t\t\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t\t\t<figure class=\"gallery-figure \">\n\t\t\t\t\t\t\t<img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n\t\t\t\t\t\t\t<figcaption class=\"gallery-figcaption\">\n\t\t\t\t\t\t\t\t<ul class=\"img-content-wrapper\">\n\t\t\t\t\t\t\t\t\t<li>Likes<span>${likes}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Views<span>${views}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Comments<span>${comments}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Downloads<span>${downloads}</span></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getGalleryData } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst MESSAGES = {\n  info: 'Please enter a value in the search field!',\n  warning:\n    'Sorry, there are no images matching your search query. Please try again!',\n  error: 'Sorry, there are no connection to the server. Please try again!',\n};\n\nconst MESSAGES_BG_COLORS = {\n  blue: '#abd4f8',\n  orange: '#f28111',\n  red: '#e97782',\n};\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst div = document.createElement('div');\n\nform.addEventListener('submit', onSubmitForm);\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n\n  iziToast.destroy();\n  gallery.innerHTML = '';\n  addLoader();\n\n  const formData = new FormData(event.target);\n  const { search } = Object.fromEntries(formData.entries());\n\n  if (!search.trim()) {\n    showInfoMessage(MESSAGES.info, MESSAGES_BG_COLORS.blue);\n    gallery.innerHTML = '';\n    return;\n  }\n\n  const galleryData = await getGalleryData(search.trim());\n\n  if (validateGalleryData(galleryData)) {\n    renderGallery(galleryData, gallery);\n  }\n\n  event.target.reset();\n}\n\nfunction showInfoMessage(message, color) {\n  iziToast.info({\n    position: 'topRight',\n    backgroundColor: `${color}`,\n    message: `${message}`,\n  });\n}\n\nfunction addLoader() {\n  div.classList.add('loader');\n  gallery.append(div);\n}\n\nfunction validateGalleryData(galleryData) {\n  if (\n    typeof galleryData === 'string' &&\n    galleryData.indexOf('Exception') !== -1\n  ) {\n    showInfoMessage(MESSAGES.error, MESSAGES_BG_COLORS.orange);\n    gallery.innerHTML = '';\n    return false;\n  } else if (galleryData && galleryData.totalHits === 0) {\n    showInfoMessage(MESSAGES.warning, MESSAGES_BG_COLORS.red);\n    gallery.innerHTML = '';\n    return false;\n  } else {\n    return true;\n  }\n}\n"],"names":["options","API_KEY","API_URL","getGalleryData","queryValue","searchParams","response","error","lightbox","SimpleLightbox","renderGallery","data","tagToInsert","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","MESSAGES","MESSAGES_BG_COLORS","form","gallery","div","onSubmitForm","event","iziToast","addLoader","formData","search","showInfoMessage","galleryData","validateGalleryData","message","color"],"mappings":"6vBAAA,MAAMA,EAAU,CACd,OAAQ,KACV,EACMC,EAAU,qCACVC,EAAU,4BAET,eAAeC,EAAeC,EAAY,CAC/C,GAAI,CACF,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAClB,CAAK,EAEKE,EAAW,MAAM,MAAMJ,EAAUG,EAAcL,CAAO,EAE5D,GAAI,CAACM,EAAS,GACZ,MAAM,IAAI,MAAM,0BAA0BA,EAAS,MAAM,EAAE,EAG7D,OAAO,MAAMA,EAAS,MACvB,OAAQC,EAAO,CACd,MAAO,8BAA8BA,CAAK,EAC3C,CACH,CCxBA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAMC,EAAa,CAC/CA,EAAY,UAAYC,EAAOF,CAAI,EAEnCH,EAAS,QAAO,CAClB,CAEA,SAASK,EAAOF,EAAM,CACpB,OAAOA,EAAK,KACT,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,qCAEyBL,CAAa;AAAA;AAAA,yCAETD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,0BAGzCC,CAAK;AAAA,0BACLC,CAAK;AAAA,6BACFC,CAAQ;AAAA,8BACPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAOlC,EACA,KAAK,EAAE,CACZ,CCrCA,MAAMC,EAAW,CACf,KAAM,4CACN,QACE,2EACF,MAAO,iEACT,EAEMC,EAAqB,CACzB,KAAM,UACN,OAAQ,UACR,IAAK,SACP,EAEMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAM,SAAS,cAAc,KAAK,EAExCF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,eAAeA,EAAaC,EAAO,CACjCA,EAAM,eAAc,EAEpBC,EAAS,QAAO,EAChBJ,EAAQ,UAAY,GACpBK,IAEA,MAAMC,EAAW,IAAI,SAASH,EAAM,MAAM,EACpC,CAAE,OAAAI,CAAM,EAAK,OAAO,YAAYD,EAAS,QAAO,CAAE,EAExD,GAAI,CAACC,EAAO,OAAQ,CAClBC,EAAgBX,EAAS,KAAMC,EAAmB,IAAI,EACtDE,EAAQ,UAAY,GACpB,MACD,CAED,MAAMS,EAAc,MAAM9B,EAAe4B,EAAO,KAAM,CAAA,EAElDG,EAAoBD,CAAW,GACjCvB,EAAcuB,EAAaT,CAAO,EAGpCG,EAAM,OAAO,OACf,CAEA,SAASK,EAAgBG,EAASC,EAAO,CACvCR,EAAS,KAAK,CACZ,SAAU,WACV,gBAAiB,GAAGQ,CAAK,GACzB,QAAS,GAAGD,CAAO,EACvB,CAAG,CACH,CAEA,SAASN,GAAY,CACnBJ,EAAI,UAAU,IAAI,QAAQ,EAC1BD,EAAQ,OAAOC,CAAG,CACpB,CAEA,SAASS,EAAoBD,EAAa,CACxC,OACE,OAAOA,GAAgB,UACvBA,EAAY,QAAQ,WAAW,IAAM,IAErCD,EAAgBX,EAAS,MAAOC,EAAmB,MAAM,EACzDE,EAAQ,UAAY,GACb,IACES,GAAeA,EAAY,YAAc,GAClDD,EAAgBX,EAAS,QAASC,EAAmB,GAAG,EACxDE,EAAQ,UAAY,GACb,IAEA,EAEX"}